<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nimio</title>
  </head>
  <body>
    <input
      id="streamURL"
      type="text"
      style="width: 408px; height: 30px; font-size: 16px"
      class="nimio-input"
      placeholder="ws:// or wss:// URL of the stream"
      value="wss://demo-nimble.softvelum.com/live/bbb"
    />
    <button
      id="initNimioButton"
      class="nimio-button"
      style="height: 36px; font-size: 16px; margin-left: 4px"
    >
      Load
    </button>
    <br />
    <br />
    <div style="display: inline-flex">
      <div id="video"></div>
      <div id="vu-meter" style="width: 80px; height: 268px"></div>
    </div>
    <script type="module">
      import Nimio from "/src/nimio.js";

      function initNimio() {
        if (window.nimio) window.nimio.destroy();

        const streamUrl = document.getElementById("streamURL").value;
        window.nimio = new Nimio({
          streamUrl: streamUrl,
          container: "video",
          autoplay: true,
          width: 476,
          height: 268,
          latency: 1000,
          startOffset: 500,
          // videoOnly: true,
          // audioOnly: true,
          metricsOverlay: true,
          logLevel: "debug",
          // adaptiveBitrate: {
          //   initialRendition: "720p",
          // },
          vuMeter: {
            container: "vu-meter",
            type: "input",
          },
        });
      }

      document
        .getElementById("initNimioButton")
        .addEventListener("click", initNimio);
    </script>
  </body>
</html>
